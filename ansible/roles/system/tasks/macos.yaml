---
- name: Allow sudo with TouchID
  become: true
  pamd:
    name: sudo
    type: auth
    control: sufficient
    module_path: pam_smartcard.so
    new_type: auth
    new_control: sufficient
    new_module_path: pam_tid.so
    state: before

- name: Manage XDG_RUNTIME_DIR
  become: true
  ansible.builtin.file:
    path: "/run/user/501"
    state: directory
    mode: '0700'
    owner: 501
